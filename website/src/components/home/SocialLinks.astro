---
/**
 * SocialLinks Section Component
 * Grid of social media links with hover glow effects
 *
 * @example
 * <SocialLinks />
 */

import { cn } from '@lib/utils';
import Section from '@components/common/Section.astro';
import Icon from '@components/common/Icon.astro';
import { socialLinks, type SocialLinkConfig } from '@data/social-links';

interface Props {
  /** Additional CSS classes */
  class?: string;
  /** Limit number of links shown */
  limit?: number;
}

const { class: className, limit } = Astro.props;

// Get primary/featured links first, then sort by order
const displayLinks = socialLinks
  .filter((link) => link.isPrimary || !limit || socialLinks.indexOf(link) < (limit || socialLinks.length))
  .sort((a, b) => a.order - b.order)
  .slice(0, limit);
---

<Section
  id="social"
  spacing="lg"
  background="secondary"
  class={cn('relative overflow-hidden', className)}
>
  <!-- Background decoration -->
  <div
    class="absolute inset-0 opacity-30 pointer-events-none"
    style="background-image: radial-gradient(circle at 1px 1px, var(--color-border-glass) 1px, transparent 1px); background-size: 32px 32px;"
    aria-hidden="true"
  />

  <div class="relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-10 md:mb-12 animate-on-scroll">
      <span class="inline-block text-[var(--color-primary)] text-sm font-medium uppercase tracking-widest mb-4">
        Соцсети
      </span>
      <h2 class="heading-section mb-4">
        Будем на{' '}
        <span class="bg-gradient-to-r from-[var(--color-gradient-start)] to-[var(--color-gradient-end)] bg-clip-text text-transparent">
          связи
        </span>
      </h2>
      <p class="body-large max-w-xl mx-auto text-[var(--color-text-muted)]">
        Подписывайтесь, чтобы не пропустить новые проекты и посты
      </p>
    </div>

    <!-- Social Links Grid -->
    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 max-w-4xl mx-auto">
      {displayLinks.map((link, index) => (
        <a
          href={link.url}
          target="_blank"
          rel="noopener noreferrer"
          class={cn(
            'group relative flex flex-col items-center gap-4 p-6 md:p-8',
            'rounded-2xl border border-[var(--color-border-glass-strong)]',
            'bg-[var(--color-bg-glass)] backdrop-blur-md',
            'transition-all duration-300 ease-out',
            'hover:-translate-y-2 hover:border-[var(--color-primary)]/50',
            'focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-bg-secondary)]',
            'animate-on-scroll'
          )}
          style={`animation-delay: ${index * 100}ms;`}
          aria-label={link.label}
        >
          <!-- Glow effect on hover -->
          <div
            class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"
            style={`background: radial-gradient(circle at center, ${link.color}20 0%, transparent 70%); box-shadow: 0 0 40px -10px ${link.color}40;`}
            aria-hidden="true"
          />
          
          <!-- Icon -->
          <div
            class={cn(
              'relative z-10 flex items-center justify-center',
              'w-14 h-14 md:w-16 md:h-16 rounded-xl',
              'bg-white/5 border border-[var(--color-border-glass)]',
              'group-hover:border-transparent group-hover:scale-110',
              'transition-all duration-300'
            )}
            style={`--link-color: ${link.color};`}
          >
            <Icon
              name={link.icon}
              size="lg"
              class={cn(
                'text-[var(--color-text-muted)]',
                'group-hover:text-[var(--link-color)]',
                'transition-colors duration-300'
              )}
            />
          </div>

          <!-- Label -->
          <div class="relative z-10 text-center">
            <span class="block font-medium text-[var(--color-text-heading)] group-hover:text-[var(--color-primary)] transition-colors duration-200">
              {link.name}
            </span>
            <span class="text-xs text-[var(--color-text-muted)]">
              {link.username}
            </span>
          </div>

          <!-- Arrow indicator -->
          <div
            class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-2 group-hover:translate-x-0"
            aria-hidden="true"
          >
            <Icon name="arrow-up-right" size="sm" class="text-[var(--color-primary)]" />
          </div>
        </a>
      ))}
    </div>

    <!-- CTA -->
    <div class="text-center mt-10 animate-on-scroll" style="animation-delay: 500ms;">
      <p class="body-small text-[var(--color-text-muted)]">
        Основной канал — 
        <a
          href="https://t.me/artfrost"
          target="_blank"
          rel="noopener noreferrer"
          class="text-[var(--color-primary)] hover:underline font-medium"
        >
          Telegram
        </a>
        . Там я публикую посты о разработке и технологиях.
      </p>
    </div>
  </div>
</Section>
