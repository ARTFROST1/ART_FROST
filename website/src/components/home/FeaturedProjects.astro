---
/**
 * FeaturedProjects Section Component
 * Displays featured projects in a responsive grid
 *
 * @example
 * <FeaturedProjects />
 */

import { cn } from '@lib/utils';
import Section from '@components/common/Section.astro';
import Card from '@components/common/Card.astro';
import Tag from '@components/common/Tag.astro';
import Icon from '@components/common/Icon.astro';
import Button from '@components/common/Button.astro';

interface Props {
  /** Additional CSS classes */
  class?: string;
}

const { class: className } = Astro.props;

// Featured projects data (will be replaced with Content Collections later)
const featuredProjects = [
  {
    id: 'artfrost-portfolio',
    title: 'Art Frost Portfolio',
    description: 'Персональный сайт-портфолио с glassmorphism дизайном, 3D элементами и автоматическим зеркалированием Telegram-канала.',
    image: '/assets/images/projects/portfolio.png',
    tags: ['Astro', 'React', 'Tailwind', 'Supabase'],
    href: '/projects/artfrost-portfolio',
    featured: true,
  },
  {
    id: 'ai-automation',
    title: 'AI Automation Tools',
    description: 'Набор инструментов для автоматизации рутинных задач с использованием AI и интеграцией с популярными сервисами.',
    image: '/assets/images/projects/ai-tools.png',
    tags: ['Python', 'OpenAI', 'n8n'],
    href: '/projects/ai-automation',
    featured: true,
  },
  {
    id: 'telegram-bot',
    title: 'Smart Telegram Bot',
    description: 'Умный бот для управления подписками, рассылками и аналитикой Telegram-канала.',
    image: '/assets/images/projects/tg-bot.png',
    tags: ['Node.js', 'TypeScript', 'Telegraf'],
    href: '/projects/telegram-bot',
    featured: false,
  },
  {
    id: 'design-system',
    title: 'Frost Design System',
    description: 'Комплексная дизайн-система с компонентами для быстрой разработки современных интерфейсов.',
    image: '/assets/images/projects/design-system.png',
    tags: ['Figma', 'React', 'Storybook'],
    href: '/projects/design-system',
    featured: false,
  },
];
---

<Section
  id="projects"
  spacing="xl"
  class={cn('relative overflow-hidden', className)}
>
  <!-- Background decoration -->
  <div
    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] opacity-20 pointer-events-none"
    style="background: radial-gradient(circle, var(--color-primary-glow) 0%, transparent 60%);"
    aria-hidden="true"
  />

  <!-- Section Header -->
  <div class="relative z-10 text-center mb-12 md:mb-16 animate-on-scroll">
    <span class="inline-block text-[var(--color-primary)] text-sm font-medium uppercase tracking-widest mb-4">
      Портфолио
    </span>
    <h2 class="heading-section mb-4">
      Последние{' '}
      <span class="bg-gradient-to-r from-[var(--color-gradient-start)] to-[var(--color-gradient-end)] bg-clip-text text-transparent">
        проекты
      </span>
    </h2>
    <p class="body-large max-w-2xl mx-auto text-[var(--color-text-muted)]">
      Избранные работы, демонстрирующие мой подход к разработке и дизайну
    </p>
  </div>

  <!-- Projects Grid -->
  <div class="relative z-10 grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
    {featuredProjects.map((project, index) => (
      <div
        class={cn(
          'animate-on-scroll',
          project.featured && 'md:row-span-2'
        )}
        style={`animation-delay: ${index * 100}ms;`}
      >
        <Card
          href={project.href}
          hover
          padding="none"
          gradient
          class="group overflow-hidden h-full"
        >
        <!-- Project Image -->
        <div class={cn(
          'relative overflow-hidden',
          project.featured ? 'aspect-[4/3] md:aspect-auto md:h-64' : 'aspect-video'
        )}>
          <!-- Placeholder gradient (replace with actual images) -->
          <div
            class="absolute inset-0 bg-gradient-to-br from-[var(--color-bg-secondary)] to-[var(--color-bg-primary)]"
          />
          
          <!-- Decorative pattern -->
          <div
            class="absolute inset-0 opacity-30"
            style="background-image: radial-gradient(circle at 2px 2px, var(--color-border-glass) 1px, transparent 1px); background-size: 24px 24px;"
          />
          
          <!-- Hover overlay -->
          <div
            class="absolute inset-0 bg-gradient-to-t from-[var(--color-bg-primary)] via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          />
          
          <!-- Featured badge -->
          {project.featured && (
            <div class="absolute top-4 right-4">
              <Tag variant="primary" size="sm">
                <span class="flex items-center gap-1">
                  <svg class="w-3 h-3" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                  </svg>
                  Featured
                </span>
              </Tag>
            </div>
          )}
        </div>

        <!-- Project Info -->
        <div class="p-6">
          <!-- Tags -->
          <div class="flex flex-wrap gap-2 mb-4">
            {project.tags.slice(0, 3).map((tag) => (
              <Tag variant="default" size="sm">
                {tag}
              </Tag>
            ))}
            {project.tags.length > 3 && (
              <Tag variant="outline" size="sm">
                +{project.tags.length - 3}
              </Tag>
            )}
          </div>

          <!-- Title -->
          <h3 class="heading-card mb-2 group-hover:text-[var(--color-primary)] transition-colors duration-200">
            {project.title}
          </h3>

          <!-- Description -->
          <p class="body-small text-[var(--color-text-muted)] line-clamp-2 mb-4">
            {project.description}
          </p>

          <!-- View link -->
          <span class="inline-flex items-center gap-2 text-sm font-medium text-[var(--color-primary)] group-hover:gap-3 transition-all duration-200">
            Подробнее
            <Icon name="arrow-right" size="sm" />
          </span>
        </div>
      </Card>
      </div>
    ))}
  </div>

  <!-- View All Button -->
  <div class="relative z-10 flex justify-center mt-12 animate-on-scroll" style="animation-delay: 400ms;">
    <Button href="/projects" variant="secondary" size="lg">
      <span class="flex items-center gap-2">
        <span>Все проекты</span>
        <Icon name="arrow-right" size="sm" />
      </span>
    </Button>
  </div>
</Section>

<style>
  /* Line clamp for description */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
