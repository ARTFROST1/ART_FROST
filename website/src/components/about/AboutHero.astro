---
/**
 * AboutHero Component
 * Bento-grid inspired layout with photo and compact info panels
 * Features: Glassmorphism cards, minimal glows, reference-style design
 *
 * @example
 * <AboutHero />
 */

import { cn } from '@lib/utils';
import Container from '@components/common/Container.astro';
import Button from '@components/common/Button.astro';
import Tag from '@components/common/Tag.astro';
import { profile, profileHighlights, currentFocus } from '@data/profile';

interface Props {
  /** Additional CSS classes */
  class?: string;
}

const { class: className } = Astro.props;

// Status indicator colors
const statusColors = {
  available: {
    bg: 'bg-brand-500/20',
    text: 'text-brand-500',
    dot: 'bg-brand-500',
    glow: 'shadow-[0_0_12px_rgba(52,184,99,0.5)]',
  },
  busy: {
    bg: 'bg-amber-500/20',
    text: 'text-amber-400',
    dot: 'bg-amber-500',
    glow: 'shadow-[0_0_12px_rgba(251,191,36,0.5)]',
  },
  'not-available': {
    bg: 'bg-red-500/20',
    text: 'text-red-400',
    dot: 'bg-red-500',
    glow: 'shadow-[0_0_12px_rgba(239,68,68,0.5)]',
  },
};

const currentStatus = statusColors[profile.status];
---

<section
  class={cn(
    'relative min-h-[70vh] flex items-center overflow-hidden',
    'py-16 md:py-20 lg:py-24',
    className
  )}
  aria-label="О себе"
>
  <!-- Minimal Background Glow Effects (like Hero) -->
  <div
    class="absolute inset-0 pointer-events-none overflow-hidden"
    aria-hidden="true"
  >
    <!-- Top-right glow (same as Hero) -->
    <div
      class="absolute -top-1/4 -right-1/4 w-[600px] h-[600px] rounded-full opacity-20"
      style="background: radial-gradient(circle, var(--color-primary-glow) 0%, transparent 70%);"
    />
    <!-- Bottom-left subtle glow (same as Hero) -->
    <div
      class="absolute -bottom-1/4 -left-1/4 w-[400px] h-[400px] rounded-full opacity-10"
      style="background: radial-gradient(circle, var(--color-gradient-end) 0%, transparent 70%);"
    />
  </div>

  <Container size="xl" class="relative z-10">
    <!-- Bento Grid Layout (reference-inspired) -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 md:gap-5 lg:gap-6">
      
      <!-- Row 1: Photo (4 cols) + Bio (8 cols) -->
      
      <!-- Photo Card -->
      <div
        class="md:col-span-4 lg:col-span-4 md:row-span-1 animate-on-scroll"
        style="transition-delay: 100ms;"
      >
        <div class="section-frame h-full overflow-hidden">
          <div class="relative w-full h-full min-h-[300px] md:min-h-full">
            <!-- Photo with subtle gradient overlay -->
            <img
              src={profile.avatar}
              alt={`Фото ${profile.name}`}
              class="w-full h-full object-cover object-center"
              loading="eager"
              fetchpriority="high"
            />
            
            <!-- Overlay gradient (bottom) -->
            <div
              class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"
              aria-hidden="true"
            />

            <!-- Status Badge - Bottom Left -->
            <div class="absolute bottom-4 left-4 right-4">
              <span
                class={cn(
                  'inline-flex items-center gap-2 px-3 py-2 rounded-xl',
                  currentStatus.bg,
                  currentStatus.text,
                  'text-xs font-medium backdrop-blur-md'
                )}
              >
                <span
                  class={cn(
                    'w-2 h-2 rounded-full animate-pulse',
                    currentStatus.dot,
                    currentStatus.glow
                  )}
                />
                {profile.statusMessage || (profile.status === 'available' ? 'Открыт для проектов' : 'Занят')}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Bio Card (same row as Photo) -->
      <div
        class="md:col-span-8 lg:col-span-8 animate-on-scroll"
        style="transition-delay: 200ms;"
      >
        <div class="section-frame h-full p-6 md:p-8">
          <!-- Header -->
          <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6">
            <div>
              <p class="text-sm uppercase tracking-wider text-[var(--color-text-muted)] mb-2">
                Обо мне
              </p>
              <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-[var(--color-text-heading)] mb-2">
                {profile.name}
              </h1>
              <p class="text-lg md:text-xl text-[var(--color-primary)] font-medium">
                {profile.title}
              </p>
            </div>
          </div>

          <!-- Bio -->
          <div class="space-y-3 text-[var(--color-text-body)] leading-relaxed">
            {profile.bio.split('\n\n').map((paragraph) => (
              <p class="text-base">{paragraph}</p>
            ))}
          </div>

          <!-- Current Focus Tags -->
          <div class="mt-6 pt-6 border-t border-[var(--color-border-glass)]">
            <h3 class="text-xs uppercase tracking-wider text-[var(--color-text-muted)] mb-3 font-semibold">
              Сейчас фокусируюсь на
            </h3>
            <div class="flex flex-wrap gap-2">
              {currentFocus.map((focus) => (
                <Tag variant="primary" size="sm">
                  {focus}
                </Tag>
              ))}
            </div>
          </div>
        </div>
      </div>

      <!-- Row 2: Stats (8 cols, under Photo + part of Bio) + CTA (4 cols) -->
      
      <!-- Stats Card - Wide, starts from left edge -->
      <div
        class="md:col-span-8 lg:col-span-8 animate-on-scroll"
        style="transition-delay: 300ms;"
      >
        <div class="section-frame h-full p-6">
          <h3 class="text-xs uppercase tracking-wider text-[var(--color-text-muted)] mb-4 font-semibold">
            Достижения
          </h3>
          <div class="grid grid-cols-2 sm:grid-cols-4 gap-6">
            {profileHighlights.map((highlight) => (
              <div>
                <div class="text-2xl md:text-3xl font-bold text-[var(--color-text-heading)] mb-1">
                  {highlight.value}
                </div>
                <div class="text-xs text-[var(--color-text-muted)]">
                  {highlight.label}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>

      <!-- CTA Card -->
      <div
        class="md:col-span-4 lg:col-span-4 animate-on-scroll"
        style="transition-delay: 400ms;"
      >
        <div class="section-frame h-full p-6 flex flex-col justify-between">
          <div class="mb-4">
            <h3 class="text-xs uppercase tracking-wider text-[var(--color-text-muted)] mb-2 font-semibold">
              Связаться
            </h3>
            <p class="text-sm text-[var(--color-text-body)]">
              Открыт для интересных проектов и коллабораций
            </p>
          </div>
          <div class="space-y-3">
            <Button href="https://t.me/artfrost" external variant="primary" size="md" class="w-full">
              Написать в Telegram
            </Button>
            {profile.resumeUrl && (
              <Button href={profile.resumeUrl} variant="secondary" size="md" class="w-full">
                Скачать резюме
              </Button>
            )}
          </div>
        </div>
      </div>

    </div>
  </Container>
</section>

<style>
  /* Minimal animations for status badge */
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.6;
    }
  }
</style>
