---
/**
 * Card Component
 * Glass card with backdrop-blur and hover effects
 *
 * @example
 * <Card>
 *   <h3>Card Title</h3>
 *   <p>Card content</p>
 * </Card>
 *
 * <Card href="/project" hover>Clickable card</Card>
 */

import { cn } from '@lib/utils';

interface Props {
  /** Make card clickable with link */
  href?: string;
  /** Enable hover animation (lift + glow) */
  hover?: boolean;
  /** Card padding size */
  padding?: 'none' | 'sm' | 'md' | 'lg';
  /** Additional CSS classes */
  class?: string;
  /** External link */
  external?: boolean;
  /** Use gradient glass style */
  gradient?: boolean;
}

const {
  href,
  hover = false,
  padding = 'md',
  class: className,
  external = false,
  gradient = false,
} = Astro.props;

// Base styles
const baseStyles = cn(
  'block rounded-2xl',
  'border border-[var(--color-border-glass-strong)]',
  'backdrop-blur-xl',
  gradient
    ? 'bg-[linear-gradient(180deg,rgba(255,255,255,0.08)_0%,rgba(255,255,255,0.02)_100%),var(--color-bg-glass)]'
    : 'bg-[var(--color-bg-glass)]'
);

// Hover styles
const hoverStyles = hover
  ? cn(
      'transition-all duration-300 ease-out',
      'hover:-translate-y-1 hover:shadow-[0_0_20px_-5px_var(--color-primary-glow)]',
      'hover:border-[var(--color-border-active)]/50'
    )
  : '';

// Padding styles
const paddingStyles = {
  none: '',
  sm: 'p-4',
  md: 'p-6',
  lg: 'p-8',
};

// Combine styles
const combinedStyles = cn(
  baseStyles,
  hoverStyles,
  paddingStyles[padding],
  href && 'cursor-pointer',
  className
);

// External link attributes
const externalAttrs = external
  ? { target: '_blank', rel: 'noopener noreferrer' }
  : {};
---

{
  href ? (
    <a href={href} class={combinedStyles} {...externalAttrs}>
      <slot />
    </a>
  ) : (
    <div class={combinedStyles}>
      <slot />
    </div>
  )
}
