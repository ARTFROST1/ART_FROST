---
/**
 * Hero Section Component
 * Two-column layout with text content and 3D visual anchor
 * Features: Badge, gradient heading, CTA buttons, animated 3D star
 *
 * @example
 * <Hero />
 */

import { cn } from '@lib/utils';
import Button from '@components/common/Button.astro';
import Container from '@components/common/Container.astro';
import GlowBackground from '@components/ui/GlowBackground.astro';
import Icon from '@components/common/Icon.astro';
import { profile } from '@data/profile';
import { siteConfig } from '@data/site-config';
import ScrollFrameAnimation from '@components/ui/ScrollFrameAnimation';

interface Props {
  /** Additional CSS classes */
  class?: string;
}

const { class: className } = Astro.props;
---

<section
  class={cn(
    'relative min-h-[calc(100vh-4rem)] flex items-center overflow-hidden',
    'py-16 md:py-24 lg:py-32',
    className
  )}
  aria-label="Hero секция"
>
  <!-- Background Glow Effects -->
  <div
    class="absolute inset-0 pointer-events-none overflow-hidden"
    aria-hidden="true"
  >
    <!-- Top-right glow -->
    <div
      class="absolute -top-1/4 -right-1/4 w-[600px] h-[600px] rounded-full opacity-20"
      style="background: radial-gradient(circle, var(--color-primary-glow) 0%, transparent 70%);"
    />
    <!-- Bottom-left subtle glow -->
    <div
      class="absolute -bottom-1/4 -left-1/4 w-[400px] h-[400px] rounded-full opacity-10"
      style="background: radial-gradient(circle, var(--color-gradient-end) 0%, transparent 70%);"
    />
  </div>

  <Container size="xl" class="relative z-10">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24 items-center">
      
      <!-- Left Column: Text Content -->
      <div
        class="flex flex-col gap-6 text-center lg:text-left animate-fade-in-up"
        style="animation-delay: 100ms;"
      >
        <!-- Badge -->
        <div class="flex justify-center lg:justify-start">
          <span
            class={cn(
              'inline-flex items-center gap-2 px-4 py-2 rounded-full',
              'bg-[var(--color-primary)]/5 border border-[var(--color-primary)]/40',
              'text-[var(--color-primary)] text-sm font-semibold tracking-wide uppercase',
              'shadow-[0_0_15px_-5px_var(--color-primary-glow)]',
              'animate-pulse-subtle'
            )}
          >
            <svg
              class="w-4 h-4"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
            </svg>
            Разработка с ИИ
          </span>
        </div>

        <!-- Heading -->
        <h1 class="heading-hero">
          <span class="block text-[var(--color-text-body)] font-normal text-lg md:text-xl mb-3">
            Привет, я
          </span>
          <span
            class="block font-bold tracking-tight bg-gradient-to-r from-white via-white/70 to-white/20 bg-clip-text text-transparent"
          >
            {siteConfig.author.name}
          </span>
          <span class="block mt-4 font-semibold">
            <span class="text-[var(--color-primary)] opacity-80">[</span>
            <span class="bg-gradient-to-r from-white/80 via-white/55 to-white/20 bg-clip-text text-transparent">
              {' '}Developer{' '}
            </span>
            <span class="text-[var(--color-primary)] opacity-80">]</span>
          </span>
        </h1>

        <!-- Description -->
        <p class="body-large max-w-lg mx-auto lg:mx-0">
          {profile.shortBio}
        </p>

        <!-- CTA Buttons -->
        <div
          class="flex flex-col sm:flex-row gap-5 justify-center lg:justify-start mt-8 animate-fade-in-up"
          style="animation-delay: 300ms;"
        >
          <Button href="https://t.me/artfrost" external variant="primary" size="lg">
            Get Started
          </Button>
          <Button href="/projects" variant="secondary" size="lg">
            Explore Now
          </Button>
        </div>

        <!-- Stats -->
        <div
          class="flex flex-wrap gap-8 justify-center lg:justify-start mt-8 pt-8 border-t border-[var(--color-border-glass)]"
          style="animation-delay: 500ms;"
        >
          <div class="text-center lg:text-left animate-fade-in-up" style="animation-delay: 600ms;">
            <span class="block text-3xl font-bold text-[var(--color-text-heading)]">5+</span>
            <span class="text-sm text-[var(--color-text-muted)]">Лет в IT</span>
          </div>
          <div class="text-center lg:text-left animate-fade-in-up" style="animation-delay: 700ms;">
            <span class="block text-3xl font-bold text-[var(--color-text-heading)]">20+</span>
            <span class="text-sm text-[var(--color-text-muted)]">Проектов</span>
          </div>
          <div class="text-center lg:text-left animate-fade-in-up" style="animation-delay: 800ms;">
            <span class="block text-3xl font-bold text-[var(--color-text-heading)]">15+</span>
            <span class="text-sm text-[var(--color-text-muted)]">Технологий</span>
          </div>
        </div>
      </div>

      <!-- Right Column: 3D Visual -->
      <div
        class="relative flex items-center justify-center lg:justify-center animate-fade-in-up"
        style="animation-delay: 200ms;"
      >
        <div class="relative w-full max-w-md md:max-w-lg lg:max-w-xl aspect-square">
          <!-- Scroll-based Frame Animation -->
          <ScrollFrameAnimation
            client:load
            framesPath="/animationFrames"
            totalFrames={36}
            framePattern="ezgif-frame-{frame} Background Removed.png"
            className="w-full h-full"
            alt="3D интерактивная анимация"
          />
          
          <!-- Background Glow Effects behind animation -->
          <div class="absolute inset-0 -z-10 flex items-center justify-center" aria-hidden="true">
            <div class="relative w-full h-full">
              <!-- Main central glow -->
              <div
                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-[85%] rounded-full animate-pulse-glow"
                style="
                  background: radial-gradient(circle, 
                    rgba(16, 185, 129, 0.3) 0%,
                    rgba(16, 185, 129, 0.2) 25%,
                    rgba(5, 150, 105, 0.15) 50%,
                    transparent 75%
                  );
                  filter: blur(60px);
                "
              />
              
              <!-- Secondary gradient blob (top-right) -->
              <div
                class="absolute top-[20%] right-[15%] w-[60%] h-[60%] rounded-full animate-float-slow"
                style="
                  background: radial-gradient(circle,
                    rgba(52, 211, 153, 0.25) 0%,
                    rgba(16, 185, 129, 0.15) 40%,
                    transparent 70%
                  );
                  filter: blur(50px);
                "
              />
              
              <!-- Tertiary gradient blob (bottom-left) -->
              <div
                class="absolute bottom-[25%] left-[20%] w-[55%] h-[55%] rounded-full animate-float-slow-reverse"
                style="
                  background: radial-gradient(circle,
                    rgba(5, 150, 105, 0.2) 0%,
                    rgba(6, 78, 59, 0.15) 50%,
                    transparent 70%
                  );
                  filter: blur(55px);
                "
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </Container>

  <!-- Scroll indicator -->
  <div
    class="absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-[var(--color-text-muted)] animate-bounce-slow"
    aria-hidden="true"
  >
    <span class="text-xs uppercase tracking-widest">Scroll</span>
    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M12 5v14M19 12l-7 7-7-7" />
    </svg>
  </div>
</section>

<style>
  /* Fade in up animation */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
  }

  /* Float animation for 3D asset */
  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-15px);
    }
  }
  
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  /* Slow float for gradient blobs */
  @keyframes floatSlow {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    33% {
      transform: translate(10px, -10px) scale(1.05);
    }
    66% {
      transform: translate(-5px, 10px) scale(0.98);
    }
  }
  
  .animate-float-slow {
    animation: floatSlow 8s ease-in-out infinite;
  }
  
  .animate-float-slow-reverse {
    animation: floatSlow 10s ease-in-out infinite reverse;
  }

  /* Glow pulse for main gradient */
  @keyframes pulseGlow {
    0%, 100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    50% {
      opacity: 0.8;
      transform: translate(-50%, -50%) scale(1.05);
    }
  }
  
  .animate-pulse-glow {
    animation: pulseGlow 4s ease-in-out infinite;
  }

  /* Subtle pulse for badge */
  @keyframes pulseSub {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.8;
    }
  }
  
  .animate-pulse-subtle {
    animation: pulseSub 3s ease-in-out infinite;
  }

  /* Slow bounce for scroll indicator */
  @keyframes bounceSlow {
    0%, 100% {
      transform: translateX(-50%) translateY(0);
    }
    50% {
      transform: translateX(-50%) translateY(10px);
    }
  }
  
  .animate-bounce-slow {
    animation: bounceSlow 2s ease-in-out infinite;
  }
</style>
