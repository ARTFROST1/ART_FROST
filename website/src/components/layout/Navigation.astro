---
/**
 * Navigation Component
 * Desktop navigation links with active state
 *
 * @example
 * <Navigation currentPath={Astro.url.pathname} />
 */

import { cn } from '@lib/utils';

interface NavItem {
  label: string;
  href: string;
}

interface Props {
  /** Current page path for active state */
  currentPath: string;
  /** Additional CSS classes */
  class?: string;
}

const { currentPath, class: className } = Astro.props;

// Navigation items
const navItems: NavItem[] = [
  { label: 'Главная', href: '/' },
  { label: 'Проекты', href: '/projects' },
  { label: 'Обо мне', href: '/about' },
  { label: 'Ссылки', href: '/links' },
];

// Check if link is active
const isActive = (href: string): boolean => {
  if (href === '/') {
    return currentPath === '/';
  }
  return currentPath.startsWith(href);
};

// Link styles - стеклянные табы с адаптивными паддингами
const linkBaseStyles = cn(
  'inline-flex items-center justify-center',
  'px-3 py-2.5 sm:px-4 sm:py-2.5 lg:px-5 lg:py-3', // Адаптивные отступы
  'text-xs sm:text-sm font-medium leading-none', // Адаптивный размер текста
  'rounded-lg sm:rounded-xl', // Адаптивное скругление
  'transition-[background-color,color,border-color,box-shadow,transform] duration-200',
  'text-[var(--color-text-body)]', // Используем CSS-переменную для текста
  'whitespace-nowrap', // Предотвращаем перенос текста
  'focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/35'
);

const linkActiveStyles = cn(
  'text-[var(--color-text-heading)]', // Текст заголовка (белый в темной, черный в светлой)
  'bg-[var(--color-bg-glass)]',
  'shadow-[inset_0_1px_0_rgba(255,255,255,0.10)]',
  '[html[data-theme="light"]_&]:bg-black/5',
  '[html[data-theme="light"]_&]:shadow-[inset_0_1px_0_rgba(0,0,0,0.05)]'
);

const linkInactiveStyles = cn(
  'hover:text-[var(--color-text-heading)]',
  'hover:bg-white/6',
  '[html[data-theme="light"]_&]:hover:bg-black/5'
);

// Container styles - адаптивная pill container
const navStyles = cn(
  'flex items-center gap-1 sm:gap-2', // Адаптивные отступы между элементами
  'rounded-xl sm:rounded-2xl', // Адаптивное скругление
  'border border-[var(--color-border-glass)]',
  'bg-[var(--color-bg-glass-strong)] backdrop-blur-xl',
  'p-1.5 sm:p-2', // Адаптивный padding контейнера
  'shadow-[0_12px_30px_-18px_rgba(0,0,0,0.7),inset_0_1px_0_rgba(255,255,255,0.06)]',
  '[html[data-theme="light"]_&]:shadow-[0_8px_20px_-12px_rgba(0,0,0,0.15),inset_0_1px_0_rgba(0,0,0,0.03)]',
  className
);
---

<nav class={navStyles} aria-label="Основная навигация">
  {
    navItems.map((item) => (
      <a
        href={item.href}
        class={cn(
          linkBaseStyles,
          isActive(item.href) ? linkActiveStyles : linkInactiveStyles
        )}
        aria-current={isActive(item.href) ? 'page' : undefined}
      >
        {item.label}
      </a>
    ))
  }
</nav>
